<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modern Notes — Offline</title>
  <style>
    :root{
      --bg1: #0f172a;
      --glass: rgba(255,255,255,0.06);
      --glass-2: rgba(255,255,255,0.04);
      --accent: #7c3aed; /* purple */
      --accent-2: #06b6d4; /* teal */
      --card-radius: 14px;
      --max-width: 980px;
      color-scheme: dark;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{height:100%;margin:0}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.16), transparent 8%),
                  radial-gradient(900px 400px at 90% 90%, rgba(6,182,212,0.12), transparent 10%),
                  linear-gradient(180deg,var(--bg1) 0%, #061024 100%);
      display:flex;align-items:center;justify-content:center;padding:36px;box-sizing:border-box;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    .app{
      width:100%;max-width:var(--max-width);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:18px;padding:22px;box-shadow: 0 8px 30px rgba(2,6,23,0.6);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.03);
    }

    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 6px 18px rgba(12,10,40,0.5)}
    .logo svg{filter:drop-shadow(0 4px 10px rgba(7,5,30,0.6))}
    h1{font-size:18px;margin:0;color:#e6eef8}
    p.sub{margin:0;font-size:12px;color:rgba(230,238,248,0.6)}

    .controls{display:flex;gap:10px;align-items:center}
    .btn{background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;color:#eaf6ff;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.04)}
    .btn.warn{background:linear-gradient(90deg,#ff6b6b,#ff8a80);color:#001}

    .toprow{display:flex;gap:12px;align-items:center;margin-bottom:14px}
    .search{flex:1;display:flex;align-items:center;background:var(--glass-2);padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}
    .search input{background:transparent;border:0;outline:none;color:#dff3ff;font-size:14px;width:100%}

    .left{width:320px}
    .note-list{display:flex;flex-direction:column;gap:10px;max-height:60vh;overflow:auto;padding:6px}
    .note-card{background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .note-card .title{font-weight:700;color:#fff;margin-bottom:6px}
    .note-card .meta{font-size:12px;color:rgba(230,238,248,0.6)}

    .main{flex:1;padding-left:18px}
    .editor{background:rgba(2,6,23,0.6);border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.02);min-height:60vh;display:flex;flex-direction:column}
    .editor input.title{background:transparent;border:0;outline:none;color:#eaf6ff;font-size:20px;font-weight:700;margin-bottom:8px}
    .editor textarea{flex:1;background:transparent;border:0;outline:none;color:#dff3ff;font-size:15px;resize:none;padding-right:6px}

    .editor .row{display:flex;gap:8px;align-items:center;margin-top:10px}
    .small{font-size:13px;color:rgba(230,238,248,0.7)}

    footer.app-foot{display:flex;justify-content:space-between;align-items:center;margin-top:12px}

    .hint{font-size:12px;color:rgba(230,238,248,0.45)}

    /* responsive */
    @media (max-width:900px){
      .app{padding:16px}
      .left{display:none}
      .main{padding-left:0}
    }

  </style>
</head>
<body>
  <div class="app" role="application">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden>
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 3h12v6H6z" fill="white" fill-opacity="0.12"/>
            <path d="M4 11h16v10H4z" fill="white" fill-opacity="0.06"/>
          </svg>
        </div>
        <div>
          <h1>Modern Notes</h1>
          <p class="sub">Offline — saves to your browser automatically</p>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="importBtn">Import</button>
        <button class="btn" id="exportBtn">Export</button>
        <button class="btn ghost" id="newBtn">+ New note</button>
        <button class="btn warn" id="clearBtn">Clear All</button>
      </div>
    </header>

    <div class="toprow">
      <div class="search">
        <input id="search" placeholder="Search notes... (title or content)" />
      </div>
    </div>

    <div style="display:flex;gap:18px;">
      <aside class="left">
        <div class="note-list" id="noteList" aria-live="polite"></div>
      </aside>

      <main class="main">
        <section class="editor" aria-label="Note editor">
          <input class="title" id="noteTitle" placeholder="Untitled" />
          <textarea id="noteBody" placeholder="Write your note here..." rows="12"></textarea>

          <div class="row">
            <div class="small hint" id="savedHint">Nothing to save — creating new note</div>
            <div style="flex:1"></div>
            <button class="btn" id="copyBtn">Copy</button>
            <button class="btn" id="saveBtn">Save</button>
            <button class="btn ghost" id="deleteBtn">Delete</button>
          </div>
        </section>

        <footer class="app-foot">
          <div class="hint">Tip: Your notes are stored locally in this browser. Export to backup.</div>
          <div class="hint">v1.0 • No backend required</div>
        </footer>
      </main>
    </div>
  </div>

  <input type="file" id="fileInput" accept="application/json" style="display:none" />

  <script>
    // Simple offline notes app — single file — localStorage
    const STORAGE_KEY = 'modern_notes_v1';
    let notes = [];
    let activeId = null;

    // DOM refs
    const noteList = document.getElementById('noteList');
    const search = document.getElementById('search');
    const newBtn = document.getElementById('newBtn');
    const saveBtn = document.getElementById('saveBtn');
    const copyBtn = document.getElementById('copyBtn');
    const deleteBtn = document.getElementById('deleteBtn');
    const clearBtn = document.getElementById('clearBtn');
    const exportBtn = document.getElementById('exportBtn');
    const importBtn = document.getElementById('importBtn');
    const fileInput = document.getElementById('fileInput');

    const titleEl = document.getElementById('noteTitle');
    const bodyEl = document.getElementById('noteBody');
    const savedHint = document.getElementById('savedHint');

    // utilities
    function id(){return 'n_'+Math.random().toString(36).slice(2,9)}
    function nowISO(){return new Date().toISOString()}

    function load(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        notes = raw ? JSON.parse(raw) : [];
      }catch(e){notes = []}
    }
    function persist(){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));
      savedHint.textContent = 'All changes saved • ' + new Date().toLocaleString();
    }

    function renderList(filterText=''){
      noteList.innerHTML='';
      const list = notes.slice().reverse().filter(n=>{
        if(!filterText) return true;
        const t = filterText.toLowerCase();
        return (n.title||'').toLowerCase().includes(t) || (n.body||'').toLowerCase().includes(t);
      });
      if(list.length===0){
        noteList.innerHTML = '<div style="color:rgba(230,238,248,0.5);padding:12px">No notes yet — click \'+ New note\' or paste text and save.</div>';
        return;
      }

      list.forEach(n=>{
        const el = document.createElement('div'); el.className='note-card';
        const t = document.createElement('div'); t.className='title'; t.textContent = n.title || (n.body||'').slice(0,40) || 'Untitled';
        const m = document.createElement('div'); m.className='meta'; m.textContent = new Date(n.updated||n.created).toLocaleString();
        el.appendChild(t); el.appendChild(m);
        el.addEventListener('click',()=>{ openNote(n.id) });
        noteList.appendChild(el);
      });
    }

    function openNote(id_){
      const n = notes.find(x=>x.id===id_);
      if(!n) return;
      activeId = n.id;
      titleEl.value = n.title || '';
      bodyEl.value = n.body || '';
      savedHint.textContent = 'Opened: ' + new Date(n.updated||n.created).toLocaleString();
    }

    function newNote(){
      activeId = null; titleEl.value=''; bodyEl.value=''; savedHint.textContent='New note — remember to save.';
    }

    function saveNote(){
      const t = titleEl.value.trim(); const b = bodyEl.value.trim();
      if(!t && !b){ alert('Note empty — nothing to save.'); return; }
      if(activeId){
        const n = notes.find(x=>x.id===activeId);
        if(n){ n.title = t; n.body = b; n.updated = nowISO(); }
      } else {
        const n = { id: id(), title: t, body: b, created: nowISO(), updated: nowISO() };
        notes.push(n);
        activeId = n.id;
      }
      persist(); renderList(search.value);
    }

    function deleteActive(){
      if(!activeId){ alert('No note selected to delete.'); return; }
      if(!confirm('Delete this note?')) return;
      notes = notes.filter(x=>x.id!==activeId);
      activeId=null; newNote(); persist(); renderList(search.value);
    }

    function clearAll(){
      if(!confirm('Erase ALL notes from this browser? This cannot be undone.')) return;
      notes = []; activeId = null; newNote(); persist(); renderList();
    }

    function copyToClipboard(){
      const text = (titleEl.value?titleEl.value+"\n\n":"") + bodyEl.value;
      navigator.clipboard.writeText(text).then(()=>{ alert('Copied to clipboard'); }).catch(()=>{ alert('Copy failed'); });
    }

    function exportNotes(){
      const data = JSON.stringify({ exportedAt: nowISO(), notes }, null, 2);
      const blob = new Blob([data], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'modern-notes.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    function importNotesFile(file){
      const reader = new FileReader();
      reader.onload = e=>{
        try{
          const parsed = JSON.parse(e.target.result);
          if(Array.isArray(parsed)){
            notes = parsed; // older format
          } else if(parsed && Array.isArray(parsed.notes)){
            // merge intelligently
            const existingIds = new Set(notes.map(x=>x.id));
            parsed.notes.forEach(n=>{ if(!existingIds.has(n.id)) notes.push(n); });
          } else { alert('Unsupported import format'); return; }
          persist(); renderList(); alert('Import complete');
        }catch(err){ alert('Failed to parse file'); }
      };
      reader.readAsText(file);
    }

    // events
    newBtn.addEventListener('click', newNote);
    saveBtn.addEventListener('click', saveNote);
    deleteBtn.addEventListener('click', deleteActive);
    clearBtn.addEventListener('click', clearAll);
    copyBtn.addEventListener('click', copyToClipboard);
    exportBtn.addEventListener('click', exportNotes);
    importBtn.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', e=>{ if(e.target.files.length) importNotesFile(e.target.files[0]); fileInput.value=''; });

    search.addEventListener('input', ()=> renderList(search.value));

    // autosave draft to session so you don't lose edits accidentally
    let draftTimer = null;
    function scheduleDraft(){
      savedHint.textContent = 'Unsaved changes...';
      if(draftTimer) clearTimeout(draftTimer);
      draftTimer = setTimeout(()=>{
        const draft = { id: activeId||null, title: titleEl.value, body: bodyEl.value, at: nowISO() };
        sessionStorage.setItem('modern_notes_draft', JSON.stringify(draft));
        savedHint.textContent = 'Draft saved locally • ' + new Date().toLocaleTimeString();
      }, 800);
    }
    titleEl.addEventListener('input', scheduleDraft);
    bodyEl.addEventListener('input', scheduleDraft);

    // load on start
    load();
    renderList();

    // restore draft if available
    const draftRaw = sessionStorage.getItem('modern_notes_draft');
    if(draftRaw){
      try{
        const d = JSON.parse(draftRaw);
        if(d && (d.title || d.body)){
          if(confirm('Restore unsaved draft from this session?')){
            activeId = d.id; titleEl.value = d.title; bodyEl.value = d.body; savedHint.textContent = 'Restored draft • ' + new Date(d.at).toLocaleString();
          }
        }
      }catch(e){}
    }

    // keyboard shortcuts
    document.addEventListener('keydown', e=>{
      if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='s'){
        e.preventDefault(); saveNote();
      }
      if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='b'){
        e.preventDefault(); newNote();
      }
    });

    // accessibility: focus first input on load
    titleEl.focus();

  </script>
</body>
</html>
